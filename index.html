<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pixel Art Maker</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #1e1e1e;
      color: white;
    }

    #grid {
      display: grid;
      grid-template-columns: repeat(64, 10px);
      grid-template-rows: repeat(64, 10px);
      gap: 1px;
      margin: 20px auto;
      background: #333;
    }

    .cell {
      width: 10px;
      height: 10px;
      background: #222;
      border: 1px solid #111;
      transition: background 0.2s;
    }

    .cell:hover {
      background: #555;
      cursor: pointer;
    }

    #controls {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    #colorPicker {
      display: none;
    }

    button {
      padding: 10px 15px;
      font-size: 14px;
      cursor: pointer;
      background: #0078d4;
      color: white;
      border: none;
      border-radius: 4px;
    }

    canvas {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Pixel Art Maker</h1>
  <div id="controls">
    <input type="color" id="colorPicker" value="#ff0000">
    <button id="transparentBtn">Transparent</button>
    <button id="saveBtn">Save PNG</button>
  </div>
  <div id="grid"></div>
  <canvas id="canvas" width="640" height="640"></canvas>

  <script>
    const grid = document.getElementById('grid');
    const colorPicker = document.getElementById('colorPicker');
    const transparentBtn = document.getElementById('transparentBtn');
    const saveBtn = document.getElementById('saveBtn');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const cells = [];

    // Create grid
    for (let i = 0; i < 64 * 64; i++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      grid.appendChild(cell);
      cells.push(cell);

      cell.addEventListener('click', () => {
        colorPicker.style.display = 'inline-block';
        colorPicker.oninput = () => {
          cell.style.background = colorPicker.value;
          colorPicker.style.display = 'none';
        };
      });
    }

    // Transparent button
    transparentBtn.onclick = () => {
      cells.forEach(cell => {
        if (cell.style.background === 'rgba(0, 0, 0, 0)') return;
        cell.style.background = 'rgba(0, 0, 0, 0)';
      });
    };

    // Save as PNG
    saveBtn.onclick = () => {
      cells.forEach((cell, i) => {
        const col = i % 64;
        const row = Math.floor(i / 64);
        const bg = window.getComputedStyle(cell).backgroundColor;
        ctx.fillStyle = bg.includes('rgba(0, 0, 0, 0)') ? 'rgba(0,0,0,0)' : bg;
        ctx.fillRect(col * 10, row * 10, 10, 10);
      });
      const link = document.createElement('a');
      link.download = 'pixel_art.png';
      link.href = canvas.toDataURL();
      link.click();
    };
  </script>
</body>
</html>
